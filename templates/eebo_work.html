{% extends "base.html" %}

{% block content %}
<div class="work-container">
    <h1>{{ work.title }}</h1>

    <div class="work-metadata">
        {% if work.author %}
            <p><strong>Author:</strong> {{ work.author }}</p>
        {% endif %}
        {% if work.publication_year %}
            <p><strong>Published:</strong> {{ work.publication_year }}</p>
        {% endif %}
        {% if work.tcp_id %}
            <p><strong>TCP ID:</strong> {{ work.tcp_id }}</p>
        {% endif %}
    </div>

    <div class="work-content">
        {% for section_title, section_content in content %}
            {% if section_title and section_content %}
                <div class="work-section">
                    <h2>{{ section_title }}</h2>
                    {% for type, text in section_content %}
                        {% if type == 'head' %}
                            <h3 class="poem-heading">{{ text }}</h3>
                        {% elif type == 'line' %}
                            <div class="poem-line">{{ text }}</div>
                        {% elif type == 'p' %}
                            <p>{{ text }}</p>
                        {% else %}
                            <p class="error">Invalid content type: {{ type }}</p>
                        {% endif %}
                    {% endfor %}
                </div>
            {% else %}
                <div class="error">Invalid section structure</div>
            {% endif %}
        {% endfor %}
    </div>
</div>
{% endblock %}
